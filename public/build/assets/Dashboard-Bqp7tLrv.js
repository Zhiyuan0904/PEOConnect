import{s as x,c as o,e as n,b as t,t as s,x as J,u as I,r as c,o as Q,l as W,m as b,f as z,y as v,d as m,F as D,g as B,h as q,z as U,a as R,j as V}from"./app-BhsT9O-c.js";import{_ as H}from"./Sidebar-rajKNV1F.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"bg-white p-6 rounded-2xl shadow-lg flex items-center gap-4 hover:scale-[1.02] transition-transform duration-300 cursor-pointer"},Z={class:"text-sm font-medium text-[#6c6f73] mb-1"},ee={class:"text-2xl font-bold text-[#4072bc]"},k={__name:"SummaryCard",props:{title:String,value:[String,Number],icon:String,color:String},setup(f){const S=f,r={primary:"linear-gradient(to right, #4072bc, #59a8f7)",secondary:"linear-gradient(to right, #f07ba3, #c4a8e3)",success:"linear-gradient(to right, #6fd97f, #59a8f7)",warning:"linear-gradient(to right, #f7e277, #f48eb4)",danger:"linear-gradient(to right, #ef4444, #f07ba3)",neutral:"linear-gradient(to right, #e3e3e3, #dcd0f7)"},u=x(()=>r[S.color]||r.primary);return(d,N)=>(n(),o("div",X,[t("div",{class:"w-14 h-14 flex items-center justify-center text-3xl rounded-full text-white shadow-md",style:J({background:u.value})},s(f.icon),5),t("div",null,[t("h4",Z,s(f.title),1),t("p",ee,s(f.value),1)])]))}},te={class:"dashboard-container ml-[20%] flex min-h-screen bg-gradient-to-tr from-[#f4f4f4] to-[#f9fbfd]"},se={class:"flex-1 p-8"},ae={class:"flex justify-between items-center mb-10"},le={class:"text-sm text-[#6c6f73]"},oe={key:0},ne={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-10"},ie={class:"bg-white p-6 rounded-2xl shadow-lg mb-10"},re={class:"flex justify-between items-center mb-6"},de={class:"flex gap-3"},ce=["value"],ue={key:0,class:"text-center text-gray-400 py-10"},ve={key:1,class:"space-y-6"},me={class:"mb-1 text-sm text-[#6c6f73]"},xe={class:"ml-2 text-xs text-gray-400"},ge={class:"w-full bg-gray-200 rounded-full h-4"},pe={key:1,class:"grid grid-cols-1 gap-6"},fe={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},be={class:"bg-white p-6 rounded-2xl shadow-md"},he={class:"text-sm text-[#1f2937] space-y-2 list-disc list-inside"},ye={key:2,class:"grid grid-cols-1 gap-6"},we={class:"bg-white p-6 rounded-2xl shadow-md text-center"},ke={class:"text-sm text-[#6c6f73] mb-2"},Se={class:"text-3xl font-mono font-bold text-[#f07ba3]"},_e={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ce={class:"bg-white p-6 rounded-2xl shadow-md"},Ae={class:"text-sm text-[#1f2937] space-y-2 list-disc list-inside"},De={key:3,class:"grid grid-cols-1 gap-6"},Re={class:"bg-white p-6 rounded-2xl shadow-md text-center"},Ne={class:"text-sm text-[#6c6f73] mb-2"},$e={class:"text-3xl font-mono font-bold text-[#f07ba3]"},Pe={key:4,class:"bg-white p-10 rounded-2xl shadow-lg text-center"},Ee={__name:"Dashboard",setup(f){var E;const S=W(),r=I(),u=(E=r.user)==null?void 0:E.role,d=c([]),N=c([]),_=c(!0),h=c(""),g=c(0),p=c(0),y=c(0),w=c(0),F=new Date("2025-07-27T23:59:59"),i=a=>a.toString().padStart(2,"0"),$=()=>{let e=F-new Date;if(e<=0){g.value=p.value=y.value=w.value=0;return}g.value=Math.floor(e/(1e3*60*60*24)),e%=1e3*60*60*24,p.value=Math.floor(e/(1e3*60*60)),e%=1e3*60*60,y.value=Math.floor(e/(1e3*60)),e%=1e3*60,w.value=Math.floor(e/1e3)},P=async()=>{_.value=!0;try{const a=await V.get("/track/progress");d.value=a.data;const e=await V.get("/track/latest-submissions");N.value=e.data}catch(a){console.error("Failed to load dashboard data",a)}finally{_.value=!1}},O=x(()=>d.value.length),C=x(()=>d.value.filter(a=>a.responded).length),A=x(()=>d.value.length),j=x(()=>A.value-C.value),L=x(()=>A.value>0?(C.value/A.value*100).toFixed(1):0),Y=x(()=>h.value?d.value.filter(a=>a.survey_title===h.value):d.value),G=a=>a.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return Q(()=>{if(!r.isAuthenticated){S.push("/login");return}["admin","quality team","dean"].includes(u)&&P(),$(),setInterval($,1e3)}),(a,e)=>{var M,T;return n(),o("div",te,[b(H),t("main",se,[t("header",ae,[e[8]||(e[8]=t("h1",{class:"text-4xl font-bold text-[#4072bc]"},"Dashboard",-1)),t("div",le,[v(r).user?(n(),o("div",oe,[e[7]||(e[7]=m(" Logged in as ")),t("strong",null,s(((M=v(r).user)==null?void 0:M.name)||"Guest"),1),m(" ("+s(G(((T=v(r).user)==null?void 0:T.role)||"Unknown"))+") ",1)])):z("",!0)])]),["admin","quality team","dean"].includes(v(u))?(n(),o(D,{key:0},[t("div",ne,[b(k,{title:"Total Surveys",value:O.value,icon:"📝",color:"primary"},null,8,["value"]),b(k,{title:"Respondents",value:C.value,icon:"👥",color:"secondary"},null,8,["value"]),b(k,{title:"Non-Respondents",value:j.value,icon:"⏳",color:"danger"},null,8,["value"]),b(k,{title:"Response Rate",value:L.value+"%",icon:"📈",color:"success"},null,8,["value"])]),t("div",ie,[t("div",re,[e[11]||(e[11]=t("h3",{class:"text-xl font-bold text-[#4072bc]"},"Survey Response Progress",-1)),t("div",de,[B(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),class:"border border-gray-300 px-3 py-2 rounded-full text-sm"},[e[9]||(e[9]=t("option",{value:""},"All Surveys",-1)),(n(!0),o(D,null,U(d.value,l=>(n(),o("option",{key:l.survey_title,value:l.survey_title},s(l.survey_title),9,ce))),128))],512),[[q,h.value]]),t("button",{onClick:P,class:"flex items-center gap-1 px-4 py-2 bg-gradient-to-r from-[#f07ba3] to-[#c4a8e3] hover:from-[#8475d2] hover:to-[#a7c8f8] text-white font-semibold px-7 py-3 rounded-full transition duration-300 shadow-md text-center"},e[10]||(e[10]=[t("span",{class:"text-lg"},"🗘",-1),t("span",{class:"text-sm font-medium"},"Refresh",-1)]))])]),_.value?(n(),o("div",ue,"Loading progress data...")):(n(),o("div",ve,[(n(!0),o(D,null,U(Y.value,l=>(n(),o("div",{key:l.survey_title,class:"mb-4"},[t("p",me,[m(s(l.survey_title)+" ",1),t("span",xe,"("+s(l.percentage)+"% Completed)",1)]),t("div",ge,[t("div",{class:"bg-gradient-to-r from-[#59a8f7] to-[#a7c8f8] h-4 rounded-full transition-all duration-500",style:J({width:l.percentage+"%"})},null,4)])]))),128))]))])],64)):v(u)==="lecturer"?(n(),o("div",pe,[e[14]||(e[14]=t("div",{class:"bg-white p-10 rounded-2xl shadow-lg text-center"},[t("h2",{class:"text-2xl font-bold text-[#4072bc] mb-4"},"Welcome Lecturer 👨‍🏫"),t("p",{class:"text-gray-600"},"You can manage curriculum content and view assigned PEOs.")],-1)),t("div",fe,[t("div",be,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-[#4072bc] mb-2"},"Quick Access",-1)),t("ul",he,[t("li",null,[t("a",{onClick:e[1]||(e[1]=l=>a.$router.push("/manage-curriculum-content")),class:"hover:text-[#4072bc] cursor-pointer"},"Manage Curriculum")]),t("li",null,[t("a",{onClick:e[2]||(e[2]=l=>a.$router.push("/manage/PEOs")),class:"hover:text-[#4072bc] cursor-pointer"},"View Assigned PEOs")]),t("li",null,[t("a",{onClick:e[3]||(e[3]=l=>a.$router.push("/update/profile")),class:"hover:text-[#4072bc] cursor-pointer"},"Update Profile")])])]),e[13]||(e[13]=R('<div class="bg-white p-6 rounded-2xl shadow-md" data-v-11cca34e><h3 class="text-lg font-semibold text-[#4072bc] mb-2" data-v-11cca34e>Lecturer Notices</h3><div class="scroll-announcement" data-v-11cca34e><ul class="text-sm text-[#6c6f73] space-y-2 text-left" data-v-11cca34e><li data-v-11cca34e>New curriculum submission window opens 1 August.</li><li data-v-11cca34e>Ensure PEOs are linked for all new content.</li><li data-v-11cca34e>Deadline for content updates is 30 July.</li><li data-v-11cca34e>Workshops for curriculum mapping begin 10 July.</li><li data-v-11cca34e>Refer to PEO Mapping Guide before submission.</li></ul></div></div><div class="bg-white p-6 rounded-2xl shadow-md" data-v-11cca34e><h3 class="text-lg font-semibold text-[#4072bc] mb-2" data-v-11cca34e>Download Resources</h3><ul class="text-sm text-[#4072bc] underline list-disc ml-5" data-v-11cca34e><li data-v-11cca34e><a href="https://fest.utm.my/educationpg/staff-resources/download-forms-academic/" data-v-11cca34e>Curriculum Template 2025</a></li><li data-v-11cca34e><a href="https://fke.utm.my/programme-objectives-skee/" data-v-11cca34e>PEO Mapping Guide</a></li></ul></div>',2))]),e[15]||(e[15]=t("div",{class:"bg-white p-6 rounded-2xl shadow-md text-center"},[t("h3",{class:"text-lg font-semibold text-[#4072bc] mb-2"},"💡 Tip"),t("p",{class:"text-sm text-[#6c6f73]"},"Keep your curriculum content updated to reflect current industry needs.")],-1))])):v(u)==="student"?(n(),o("div",ye,[e[21]||(e[21]=t("div",{class:"bg-white p-10 rounded-2xl shadow-lg text-center"},[t("h2",{class:"text-2xl font-bold text-[#4072bc] mb-4"},"Welcome Student 🎓"),t("p",{class:"text-gray-600"},"Please respond to your assigned surveys from the sidebar.")],-1)),t("div",we,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-[#4072bc] mb-2"},"Survey Deadline Countdown",-1)),t("p",ke,[e[16]||(e[16]=m(" You have ")),t("strong",null,s(i(g.value))+" days "+s(i(p.value))+" hours",1),e[17]||(e[17]=m(" left to complete your active surveys. "))]),t("div",Se,s(i(g.value))+"d : "+s(i(p.value))+":"+s(i(y.value))+":"+s(i(w.value)),1)]),t("div",_e,[t("div",Ce,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-[#4072bc] mb-2"},"Quick Access",-1)),t("ul",Ae,[t("li",null,[t("a",{onClick:e[4]||(e[4]=l=>a.$router.push("/respond/surveys")),class:"hover:text-[#4072bc] cursor-pointer"},"Respond to Surveys")]),t("li",null,[t("a",{onClick:e[5]||(e[5]=l=>a.$router.push("/update/profile")),class:"hover:text-[#4072bc] cursor-pointer"},"Update Profile")]),t("li",null,[t("a",{onClick:e[6]||(e[6]=l=>a.$router.push("/view/history")),class:"hover:text-[#4072bc] cursor-pointer"},"View Survey History")])])]),e[20]||(e[20]=R('<div class="bg-white p-6 rounded-2xl shadow-md text-center" data-v-11cca34e><h3 class="text-lg font-semibold text-[#4072bc] mb-2" data-v-11cca34e>News &amp; Announcements</h3><div class="scroll-announcement" data-v-11cca34e><ul class="text-sm text-[#6c6f73] space-y-2 text-left" data-v-11cca34e><li data-v-11cca34e>System maintenance scheduled on 1 July.</li><li data-v-11cca34e>New feature: Survey history available soon on 31 July.</li><li data-v-11cca34e>Reminder: Course Feedback Survey closes on 30 June.</li><li data-v-11cca34e>Semester 1 survey results will be published in August.</li><li data-v-11cca34e>New UI update rolling out next month.</li><li data-v-11cca34e>Alumni module enhancements coming in Q4.</li><li data-v-11cca34e>Check your email for important survey invitations.</li></ul></div></div><div class="bg-white p-6 rounded-2xl shadow-md" data-v-11cca34e><h3 class="text-lg font-semibold text-[#4072bc] mb-2" data-v-11cca34e>Download Resources</h3><ul class="text-sm text-[#4072bc] underline list-disc ml-5" data-v-11cca34e><li data-v-11cca34e><a href="https://amd.utm.my/amacs/wp-content/uploads/sites/472/2024/04/ACADEMIC-CALENDAR-DEGREE-AND-POSTGRADUATE-2024_2025.pdf" data-v-11cca34e>Academic Calendar 2025</a></li></ul></div>',2))])])):v(u)==="alumni"?(n(),o("div",De,[e[25]||(e[25]=t("div",{class:"bg-white p-10 rounded-2xl shadow-lg text-center"},[t("h2",{class:"text-2xl font-bold text-[#4072bc] mb-4"},"Welcome Alumni 🎓"),t("p",{class:"text-gray-600"},"Thank you for participating in the graduate tracer survey!")],-1)),t("div",Re,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-[#4072bc] mb-2"},"Survey Deadline Countdown",-1)),t("p",Ne,[e[22]||(e[22]=m(" You have ")),t("strong",null,s(i(g.value))+" days "+s(i(p.value))+" hours",1),e[23]||(e[23]=m(" left to complete your surveys. "))]),t("div",$e,s(i(g.value))+"d : "+s(i(p.value))+":"+s(i(y.value))+":"+s(i(w.value)),1)]),e[26]||(e[26]=R('<div class="grid grid-cols-1 md:grid-cols-3 gap-6" data-v-11cca34e><div class="bg-white p-6 rounded-2xl shadow-md text-center" data-v-11cca34e><h3 class="text-lg font-semibold text-[#4072bc] mb-2" data-v-11cca34e>Upcoming Deadlines</h3><ul class="text-sm text-[#6c6f73] list-disc ml-5 text-left" data-v-11cca34e><li data-v-11cca34e>Tracer Survey – Due: 27 July</li><li data-v-11cca34e>Alumni Feedback – Due: 15 July</li></ul></div><div class="bg-white p-6 rounded-2xl shadow-md text-center" data-v-11cca34e><h3 class="text-lg font-semibold text-[#4072bc] mb-2" data-v-11cca34e>News &amp; Announcements</h3><div class="scroll-announcement" data-v-11cca34e><ul class="text-sm text-[#6c6f73] space-y-2 text-left" data-v-11cca34e><li data-v-11cca34e>Reminder: Course Feedback Survey closes on 30 June.</li><li data-v-11cca34e>Semester 1 survey results will be published in August.</li><li data-v-11cca34e>New UI update rolling out next month.</li><li data-v-11cca34e>Alumni module enhancements coming in Q4.</li><li data-v-11cca34e>Check your email for important survey.</li></ul></div></div><div class="bg-white p-6 rounded-2xl shadow-md text-center" data-v-11cca34e><h3 class="text-lg font-semibold text-[#4072bc] mb-2" data-v-11cca34e>Download Resources</h3><ul class="text-sm text-[#4072bc] underline list-disc ml-5 text-left" data-v-11cca34e><li data-v-11cca34e><a href="https://registrar.utm.my/bsm/career-utm/" data-v-11cca34e>UTM Career</a></li></ul></div></div><div class="bg-white p-6 rounded-2xl shadow-md text-center" data-v-11cca34e><h3 class="text-lg font-semibold text-[#4072bc] mb-2" data-v-11cca34e>💡 Your Voice Matters</h3><p class="text-sm text-[#6c6f73]" data-v-11cca34e>Your feedback helps improve the experience for future students. Thank you for contributing!</p></div>',2))])):(n(),o("div",Pe,e[27]||(e[27]=[t("h2",{class:"text-2xl font-bold text-red-500 mb-4"},"Unknown Role",-1),t("p",{class:"text-gray-600"},"Your role is not assigned correctly. Please contact admin.",-1)])))])])}}},Ve=K(Ee,[["__scopeId","data-v-11cca34e"]]);export{Ve as default};
