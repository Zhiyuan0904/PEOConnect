import{r as n,s as k,o as C,c as a,m as g,b as e,F as v,z as m,p as S,T as N,j as b,e as l,t as r,d as T,x as F,f as R,g as h,v as V,h as j,n as L}from"./app-BhsT9O-c.js";import{_ as D}from"./Sidebar-rajKNV1F.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"flex ml-[20%] min-h-screen bg-gradient-to-tr from-[#f4f4f4] to-[#f9fbfd]"},$={class:"flex-1 p-10"},B={class:"max-w-7xl mx-auto"},M={key:0,class:"text-center text-gray-500 text-lg py-10 animate-pulse"},U={key:1,class:"text-center text-gray-400 text-lg py-10"},E={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},I={class:"p-6 flex-1"},A={class:"text-xl font-bold text-[#4072bc] mb-3"},q={class:"text-gray-700 mb-3"},G={class:"ml-2 text-sm text-[#4072bc] font-bold"},H={class:"w-full bg-gray-200 rounded-full h-5 overflow-hidden"},J={class:"flex justify-center border-t px-4 py-4 bg-[#f9fafb]"},K=["onClick"],O={key:0,class:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center p-4"},Q={class:"bg-white w-full max-w-6xl p-10 rounded-2xl shadow-2xl relative overflow-y-auto max-h-[90vh]"},W={class:"text-3xl font-bold text-[#4072bc] mb-8"},X={class:"mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},Y={class:"overflow-x-auto rounded-xl border border-gray-200"},Z={class:"w-full text-sm text-left"},ee={class:"py-3 px-6"},te={class:"py-3 px-6"},se={class:"py-3 px-6"},oe={__name:"TrackProgress",setup(ae){const f=n(!0),c=n([]),u=n(!1),p=n(""),x=n([]),i=n(""),d=n(""),_=async()=>{try{const o=await b.get("/track/progress");c.value=o.data}catch(o){console.error("Failed to load progress:",o),alert("Failed to fetch progress data.")}finally{f.value=!1}},y=async o=>{try{const t=await b.get(`/track/progress/${encodeURIComponent(o)}`);x.value=t.data.students,p.value=o,u.value=!0}catch(t){console.error("Failed to load detail:",t),alert("Failed to fetch student list.")}},w=k(()=>x.value.filter(o=>{const t=o.name.toLowerCase().includes(i.value.toLowerCase())||o.email.toLowerCase().includes(i.value.toLowerCase()),s=d.value===""||d.value==="responded"&&o.responded||d.value==="not_responded"&&!o.responded;return t&&s}));return C(_),(o,t)=>(l(),a("div",P,[g(D),e("main",$,[e("div",B,[t[6]||(t[6]=e("div",{class:"flex justify-between items-center mb-10"},[e("h1",{class:"text-4xl font-bold text-[#4072bc]"},"Track Survey Progress")],-1)),f.value?(l(),a("div",M," Loading progress data... ")):c.value.length===0?(l(),a("div",U," No progress data available. ")):(l(),a("div",E,[(l(!0),a(v,null,m(c.value,s=>(l(),a("div",{key:s.survey_title,class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition flex flex-col justify-between"},[e("div",I,[e("h2",A,r(s.survey_title),1),e("p",q,[t[3]||(t[3]=e("strong",null,"Responded:",-1)),T(" "+r(s.responded)+" / "+r(s.total)+" ",1),e("span",G,"("+r(s.percentage)+"%)",1)]),e("div",H,[e("div",{class:"bg-gradient-to-r from-[#59a8f7] to-[#a7c8f8] h-5 rounded-full transition-all duration-500",style:F({width:s.percentage+"%"})},null,4)])]),e("div",J,[e("button",{onClick:le=>y(s.survey_title),class:"w-60 bg-gradient-to-r from-[#f07ba3] to-[#c4a8e3] hover:from-[#8475d2] hover:to-[#a7c8f8] transition text-white px-8 py-3 rounded-full shadow-lg"}," View Details ",8,K)])]))),128))])),g(N,{name:"modal-fade"},{default:S(()=>[u.value?(l(),a("div",O,[e("div",Q,[e("h2",W,r(p.value)+" – Respondents",1),e("div",X,[h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),type:"text",placeholder:"🔍 Search by name or email...",class:"flex-1 p-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-[#4072bc] focus:outline-none"},null,512),[[V,i.value]]),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),class:"p-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-[#4072bc] focus:outline-none"},t[4]||(t[4]=[e("option",{value:""},"All",-1),e("option",{value:"responded"},"✅ Responded",-1),e("option",{value:"not_responded"},"❌ Not Responded",-1)]),512),[[j,d.value]])]),e("div",Y,[e("table",Z,[t[5]||(t[5]=e("thead",{class:"bg-[#f1f5f9] text-[#4072bc] font-semibold"},[e("tr",null,[e("th",{class:"py-4 px-6"},"Name"),e("th",{class:"py-4 px-6"},"Email"),e("th",{class:"py-4 px-6"},"Status")])],-1)),e("tbody",null,[(l(!0),a(v,null,m(w.value,s=>(l(),a("tr",{key:s.email,class:"border-t hover:bg-gray-50 transition"},[e("td",ee,r(s.name),1),e("td",te,r(s.email),1),e("td",se,[e("span",{class:L(s.responded?"text-green-600 font-semibold":"text-red-500 font-semibold")},r(s.responded?"Responded":"Not Responded"),3)])]))),128))])])]),e("button",{onClick:t[2]||(t[2]=s=>u.value=!1),class:"absolute top-4 right-4 text-gray-600 hover:text-black text-3xl font-bold","aria-label":"Close"},"×")])])):R("",!0)]),_:1})])])]))}},ie=z(oe,[["__scopeId","data-v-d5fa0eb2"]]);export{ie as default};
