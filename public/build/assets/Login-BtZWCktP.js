import{r as d,u as w,o as y,k as h,l as _,c as l,b as s,w as k,f as p,g,v as P,i as M,n as C,d as m,t as b,e as n}from"./app-BhsT9O-c.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"h-screen w-full flex items-center justify-center font-sans bg-gradient-to-br from-[#fce4ec] via-[#f3e5f5] to-[#e3f2fd]"},V={class:"w-full max-w-md bg-white bg-opacity-60 backdrop-blur-lg rounded-2xl shadow-xl p-8"},q={class:"relative"},D={class:"relative"},E=["type"],B=["disabled"],N={key:0},U={key:1},F={key:0,class:"text-green-600 text-center text-sm"},I={key:1,class:"text-red-500 text-center text-sm"},R={__name:"Login",setup(T){const u=d(""),c=d(""),i=d(!1),o=d(""),r=_(),f=h(),v=w();y(()=>{f.query.reset==="success"&&(alert("✅ Password reset successful! Please log in."),r.replace({...f,query:{}}))});const x=async()=>{var t;try{i.value=!0,o.value="";const e=await v.login(u.value.trim(),c.value);if(e.must_reset_password)return alert("⚠️ First-time login. Please reset your password."),r.push("/reset-password-first-time");if(e.role==="student"&&(!e.enroll_date||!e.expected_graduate_date))return alert("⚠️ Complete enrollment and expected-graduation dates."),r.push("/update/profile");if(e.role==="alumni"&&(!e.enroll_date||!e.actual_graduate_date))return alert("⚠️ Complete enrollment and actual-graduation dates."),r.push("/update/profile");r.push("/dashboard")}catch(e){const a=(t=e.response)==null?void 0:t.status;a===401?o.value="❌ Invalid credentials.":a===403?o.value="⚠️ "+e.response.data.message:o.value=e.message}finally{i.value=!1}};return(t,e)=>(n(),l("div",S,[s("div",V,[e[7]||(e[7]=s("div",{class:"text-center mb-6"},[s("h1",{class:"text-4xl font-extrabold text-[#4072bc]"},"Login"),s("p",{class:"text-lg text-gray-600 mt-1"},"Connecting Education with Excellence")],-1)),s("form",{onSubmit:k(x,["prevent"]),class:"space-y-5"},[s("div",q,[g(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),type:"email",placeholder:"Email",class:"w-full px-11 py-3 rounded-lg bg-white bg-opacity-80 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#a0c4ff]",required:""},null,512),[[P,u.value]]),e[3]||(e[3]=s("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[#4072bc]"},[s("i",{class:"fas fa-envelope"})],-1))]),s("div",D,[g(s("input",{type:t.showPassword?"text":"password","onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),placeholder:"Password",class:"w-full px-11 py-3 rounded-lg bg-white bg-opacity-80 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#a0c4ff]",required:""},null,8,E),[[M,c.value]]),e[4]||(e[4]=s("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[#4072bc]"},[s("i",{class:"fas fa-lock"})],-1)),s("span",{onClick:e[2]||(e[2]=a=>t.showPassword=!t.showPassword),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-[#4072bc] cursor-pointer"},[s("i",{class:C(t.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),e[6]||(e[6]=s("div",{class:"text-right text-sm text-[#4072bc]"},[s("a",{href:"/forgot-password",class:"hover:text-[#f07ba3] transition"},"Forgot password?")],-1)),s("button",{type:"submit",class:"w-full py-3 rounded-lg bg-gradient-to-r from-[#f07ba3] to-[#c4a8e3] hover:from-[#8475d2] hover:to-[#a7c8f8] text-white font-semibold transition duration-300 shadow-md",disabled:i.value},[i.value?(n(),l("span",U,e[5]||(e[5]=[m("Loading"),s("span",{class:"animate-pulse"},"...",-1)]))):(n(),l("span",N,"Login"))],8,B),t.successMessage?(n(),l("p",F,b(t.successMessage),1)):p("",!0),o.value?(n(),l("p",I,b(o.value),1)):p("",!0)],32),e[8]||(e[8]=s("p",{class:"mt-6 text-center text-sm text-gray-600"},[m(" Don’t have an account? "),s("a",{href:"/sign-up",class:"text-[#4072bc] font-semibold hover:text-[#f07ba3]"},"Sign up")],-1))])]))}},A=L(R,[["__scopeId","data-v-5bd171fa"]]);export{A as default};
