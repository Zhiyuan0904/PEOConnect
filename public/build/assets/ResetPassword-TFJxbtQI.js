import{u as y,r as i,o as _,k,c as o,b as s,w as h,g as f,v as c,f as v,t as P,d as x,m as V,p as q,q as N,l as R,e as a,j as S}from"./app-CLQc5iUQ.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C="/build/assets/resetpassword-N6kVXVUl.png",U={class:"h-screen w-full flex items-center justify-center font-sans bg-gradient-to-br from-[#e3f2fd] via-[#f3e5f5] to-[#fce4ec]"},j={class:"w-full max-w-4xl bg-white rounded-2xl shadow-2xl flex overflow-hidden"},I={class:"w-full md:w-1/2 p-10 bg-gradient-to-b from-[#6ca8dd] to-[#b1d4ef] flex flex-col justify-center"},A={class:"bg-white p-8 rounded-xl shadow-lg"},E={key:0,class:"mb-4 p-3 bg-red-100 text-red-700 rounded text-sm text-center"},M={key:0,class:"text-red-500 text-xs mt-1"},T={key:0,class:"text-red-500 text-xs mt-1"},D=["disabled"],L={key:0},X={key:1},z={class:"mt-4 text-center"},F={__name:"ResetPassword",setup(G){const u=k(),g=R(),w=y(),n=i({}),m=i(!1),d=i(!1),t=i({email:"",password:"",password_confirmation:"",token:""});_(()=>{t.value.token=u.query.token||"",t.value.email=u.query.email?decodeURIComponent(u.query.email):"",(!t.value.token||!t.value.email)&&(m.value=!0)});const b=async()=>{var p,e;n.value={},d.value=!0;try{await S.post("/reset-password",{email:t.value.email,token:t.value.token,password:t.value.password,password_confirmation:t.value.password_confirmation}),localStorage.removeItem("token"),w.logout&&await w.logout(),g.push({name:"login",query:{reset:"success"}})}catch(r){((p=r.response)==null?void 0:p.status)===422?n.value=r.response.data.errors:((e=r.response)==null?void 0:e.status)===400?m.value=!0:alert("An unexpected error occurred. Please try again.")}finally{d.value=!1}};return(p,e)=>{const r=N("router-link");return a(),o("div",U,[s("div",j,[e[10]||(e[10]=s("div",{class:"hidden md:flex w-1/2 bg-white items-center justify-center p-10"},[s("img",{src:C,alt:"Reset Password",class:"max-w"})],-1)),s("div",I,[s("div",A,[e[8]||(e[8]=s("h2",{class:"text-2xl font-bold text-center mb-3 text-[#1B3A57]"},"Enter New Password",-1)),e[9]||(e[9]=s("p",{class:"text-sm text-gray-600 text-center mb-6"},"Please choose a password different from the previous one.",-1)),m.value?(a(),o("div",E," Invalid or expired reset link. Please request a new password reset. ")):(a(),o("form",{key:1,onSubmit:h(b,["prevent"]),class:"space-y-4"},[s("div",null,[e[3]||(e[3]=s("label",{class:"block text-gray-700 mb-1 text-sm"},"Email",-1)),f(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.email=l),type:"email",readonly:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-500"},null,512),[[c,t.value.email]])]),s("div",null,[e[4]||(e[4]=s("label",{class:"block text-gray-700 mb-1 text-sm"},"New Password",-1)),f(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.password=l),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#a0c4ff]",required:"",minlength:"8"},null,512),[[c,t.value.password]]),n.value.password?(a(),o("p",M,P(n.value.password[0]),1)):v("",!0)]),s("div",null,[e[5]||(e[5]=s("label",{class:"block text-gray-700 mb-1 text-sm"},"Confirm Password",-1)),f(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.password_confirmation=l),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#a0c4ff]",required:""},null,512),[[c,t.value.password_confirmation]]),t.value.password!==t.value.password_confirmation?(a(),o("p",T," Passwords do not match. ")):v("",!0)]),s("button",{type:"submit",class:"w-full py-3 bg-gradient-to-r from-[#f07ba3] to-[#c4a8e3] hover:from-[#8475d2] hover:to-[#a7c8f8] text-white font-semibold rounded-lg transition duration-300 shadow-md",disabled:d.value||t.value.password!==t.value.password_confirmation},[d.value?(a(),o("span",X,e[6]||(e[6]=[x("Processing"),s("span",{class:"animate-pulse"},"...",-1)]))):(a(),o("span",L,"Submit"))],8,D)],32)),s("div",z,[V(r,{to:"/login",class:"text-sm text-[#4072bc] hover:underline"},{default:q(()=>e[7]||(e[7]=[x("Back to Login")])),_:1})])])])])])}}},K=B(F,[["__scopeId","data-v-e70d1da3"]]);export{K as default};
