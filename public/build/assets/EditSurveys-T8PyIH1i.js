import{r as b,o as U,c as u,m as f,b as e,w as $,f as x,g as r,v,x as M,t as c,p as j,T as E,F as y,z as g,j as h,k as F,l as N,e as a,h as O,n as z}from"./app-CLQc5iUQ.js";import{_ as A}from"./Sidebar-BuI_G_lZ.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"flex ml-[20%] min-h-screen bg-gradient-to-tr from-[#f4f4f4] to-[#f9fbfd]"},L={class:"flex-1 flex items-center justify-center p-10"},P={class:"w-full max-w-5xl bg-white rounded-2xl shadow-lg p-10"},R={key:0,class:"text-center text-gray-500 text-lg"},G={key:1},H={class:"mb-6"},J={class:"w-full bg-gray-200 rounded-full h-2"},K={class:"text-xs text-right mt-1 text-[#6c6f73]"},W={key:0},X={class:"flex justify-between items-center mb-4"},Y={class:"font-semibold text-[#4072bc] text-lg"},Z={class:"mb-4"},I={class:"mb-4"},ee={key:0},te=["onUpdate:modelValue"],se=["onClick"],oe={class:"flex justify-between items-center mb-6"},le=["disabled"],ne={class:"flex space-x-1"},ue=["onClick"],ae=["disabled"],ie={class:"max-w-lg mx-auto space-y-4"},de=["disabled"],re={__name:"EditSurveys",setup(ve){const m=F(),_=N(),s=b({title:"",description:"",questions:[]}),o=b(0),d=b(!0),q=async()=>{try{const{data:l}=await h.get(`/surveys/${m.params.id}`);s.value.title=l.title,s.value.description=l.description,s.value.questions=l.questions||[]}catch(l){console.error(l),alert("❌ Failed to load survey.")}finally{d.value=!1}},w=async()=>{try{d.value=!0,await h.put(`/surveys/${m.params.id}`,s.value),alert("✅ Survey updated successfully!"),_.push("/manage/surveys")}catch(l){console.error(l),alert("❌ Failed to update survey. Please try again.")}finally{d.value=!1}},k=()=>{s.value.questions.push({questionText:"",questionType:"short-answer",options:[]}),o.value=s.value.questions.length-1},S=l=>{s.value.questions.splice(l,1),o.value>0&&o.value--},C=l=>{s.value.questions[l].options.push("")},T=(l,t)=>{s.value.questions[l].options.splice(t,1)},Q=()=>{o.value<s.value.questions.length-1&&o.value++},V=()=>{o.value>0&&o.value--};return U(()=>{q()}),(l,t)=>(a(),u("div",D,[f(A),e("main",L,[e("div",P,[d.value?(a(),u("div",R," Loading survey data... ")):(a(),u("div",G,[t[12]||(t[12]=e("h1",{class:"text-4xl font-bold text-[#4072bc] mb-8"},"Edit Survey ✏️",-1)),e("form",{onSubmit:$(w,["prevent"]),class:"space-y-6"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block mb-2 text-sm font-semibold text-[#4072bc]"},"Survey Title",-1)),r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>s.value.title=n),type:"text",class:"w-full border border-[#e3e3e3] rounded-lg px-4 py-3",required:""},null,512),[[v,s.value.title]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block mb-2 text-sm font-semibold text-[#4072bc]"},"Survey Description",-1)),r(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>s.value.description=n),rows:"3",class:"w-full border border-[#e3e3e3] rounded-lg px-4 py-3"},null,512),[[v,s.value.description]])]),e("div",H,[e("div",J,[e("div",{class:"bg-[#4072bc] h-2 rounded-full transition-all duration-300",style:M({width:(o.value+1)/s.value.questions.length*100+"%"})},null,4)]),e("p",K," Question "+c(o.value+1)+" of "+c(s.value.questions.length),1)]),s.value.questions.length?(a(),u("div",W,[f(E,{name:"fade",mode:"out-in"},{default:j(()=>[(a(),u("div",{key:o.value,class:"bg-[#f9fbfd] border border-[#e3e3e3] rounded-xl p-6 mb-6 shadow-sm"},[e("div",X,[e("h3",Y,"Question "+c(o.value+1),1),e("button",{type:"button",class:"text-red-500 text-xl hover:text-red-700",onClick:t[2]||(t[2]=n=>S(o.value))},"×")]),e("div",Z,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-[#6c6f73] mb-1"},"Question Text",-1)),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>s.value.questions[o.value].questionText=n),type:"text",class:"w-full border border-[#e3e3e3] px-3 py-2 rounded-lg",required:""},null,512),[[v,s.value.questions[o.value].questionText]])]),e("div",I,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-[#6c6f73] mb-1"},"Question Type",-1)),r(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.value.questions[o.value].questionType=n),class:"w-full border border-[#e3e3e3] px-3 py-2 rounded-lg"},t[9]||(t[9]=[e("option",{value:"short-answer"},"Short Answer",-1),e("option",{value:"multiple-choice"},"Multiple Choice",-1)]),512),[[O,s.value.questions[o.value].questionType]])]),s.value.questions[o.value].questionType==="multiple-choice"?(a(),u("div",ee,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-[#6c6f73] mb-1"},"Options",-1)),(a(!0),u(y,null,g(s.value.questions[o.value].options,(n,i)=>(a(),u("div",{key:i,class:"flex gap-2 mb-2"},[r(e("input",{"onUpdate:modelValue":p=>s.value.questions[o.value].options[i]=p,type:"text",class:"w-full border border-[#e3e3e3] px-3 py-2 rounded-lg",required:""},null,8,te),[[v,s.value.questions[o.value].options[i]]]),e("button",{type:"button",class:"text-red-500 text-xl hover:text-red-700",onClick:p=>T(o.value,i)},"×",8,se)]))),128)),e("button",{type:"button",class:"bg-gray-200 px-4 py-2 rounded-full font-medium text-sm",onClick:t[5]||(t[5]=n=>C(o.value))},"+ Add Option")])):x("",!0)]))]),_:1}),e("div",oe,[e("button",{type:"button",class:"text-sm px-4 py-2 rounded-full font-semibold bg-[#e3e3e3] hover:bg-[#d0d0d0]",onClick:V,disabled:o.value===0},"← Previous",8,le),e("div",ne,[(a(!0),u(y,null,g(s.value.questions,(n,i)=>(a(),u("button",{key:i,type:"button",class:z(["w-3 h-3 rounded-full",{"bg-[#4072bc]":o.value===i,"bg-gray-300":o.value!==i}]),onClick:p=>o.value=i},null,10,ue))),128))]),e("button",{type:"button",class:"text-sm px-4 py-2 rounded-full font-semibold bg-[#4072bc] text-white hover:bg-[#2f5a99]",onClick:Q,disabled:o.value===s.value.questions.length-1},"Next →",8,ae)])])):x("",!0),e("div",ie,[e("button",{type:"button",class:"w-full bg-[#4072bc] text-white px-8 py-3 rounded-full font-semibold",onClick:k}," + Add Question "),e("button",{type:"submit",class:"w-full bg-gradient-to-r from-[#f07ba3] to-[#c4a8e3] hover:from-[#8475d2] hover:to-[#a7c8f8] text-white font-semibold py-3 rounded-full",disabled:d.value},c(d.value?"Updating...":"Update Survey"),9,de)])],32)]))])])]))}},me=B(re,[["__scopeId","data-v-ab8b5af0"]]);export{me as default};
